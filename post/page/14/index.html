
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Timeline</title>
	<meta name="author" content="Anthony Kong">

	
	<meta name="description" content="This bit of code is trying to calculate a list of mid prices based on bid and ask prices 1
2
3
def mids(self, bids, asks): f = lambda X, Y: (X is &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta rel="cannonical" href="www.ahwkong.com"

	<link href="/atom.xml" rel="alternate" title="Timeline" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Timeline</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:kongakong.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		<a class="google" href="https://plus.google.com/107508522522146376690?rel=author" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/kongakong" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/kongakong" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:kongakong.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/post/2012/09/20/p-31877647026/">
		
			Side Effect Programming Is Bad</a>
	</h2>
	<div class="entry-content">
		<p>This bit of code is trying to calculate a list of mid prices based on bid and ask prices</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>def mids(self, bids, asks):
</span><span class='line'>    f = lambda X, Y: (X is not None) and (Y  is not None) and (X+Y)/2 or None
</span><span class='line'>    return [f(bid, ask) for bid, ask in zip(bids, asks)</span></code></pre></td></tr></table></div></figure>


<p>It works fine unTIL one day there is a None in mids.</p>

<p>The bid and ask of the corresponding item are both zero. We expect to see zero in the result.</p>

<p>So what happened?</p>

<p>The original lambda, f, rely on the side effect of short-circuit behaviour of  and/or operator to return the mid price (if there is data) or None (if both are <code>None</code>)</p>

<p>But it will not work if both X and Y are zero, because zero is evaluated to false. While zero is the answer we want, the execution falls to the ‘or’ part of the expression.</p>

<p>A better to write the lambda:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>f = lambda X, Y:  (X+Y)/2.0 if (X is not None) and (Y  is not None)  else None</span></code></pre></td></tr></table></div></figure>




		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-20T06:52:00+10:00" pubdate data-updated="true">Sep 20<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/post/categories/python/'>python</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/post/2012/09/19/p-31813116468/">
		
			Scala Build Tool</a>
	</h2>
	<div class="entry-content">
		<p><a href="https://github.com/harrah/xsbt/wiki">Scala build tool</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-19T06:39:00+10:00" pubdate data-updated="true">Sep 19<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/post/categories/scale/'>scale</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/post/2012/09/16/p-31619891652/">
		
			iMac Woe</a>
	</h2>
	<div class="entry-content">
		<p>This 27” iMac brings me endless issue.</p>

<p>When I first bought it, it got recalled right away.</p>

<p>I have to take a cab to and from the apple store because it is too hard to find parking in the CBD near the Apple Store. Have to move this heavy beast up and down to get to the genius bar.</p>

<p>From then on there is a lot of stability issue.</p>

<p>I am trying to upgrade it to Mountain Lion today.</p>

<p>My previous attempts on Macbook air and Macbook Pro are very smooth.</p>

<p>But not on this iMac.</p>

<p>For days, I cannot download the Mountain Lion installer to Launder.</p>

<p>Fine.</p>

<p>Prepared an mountain lion OSX thumb drive and boot it up. Cannot run installer because it cannot download components for installation!</p>

<p>Should never buy an iMac. Look stunning but really unreliable. Should have bough a mac mini + display instead. At least it will make it easier to visit a Genius Bar when there is a trouble.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-16T09:42:00+10:00" pubdate data-updated="true">Sep 16<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/post/categories/apple/'>apple</a>, <a class='category' href='/post/categories/rant/'>rant</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/post/2012/09/10/p-31263644336/">
		
			Human Behavioral Biology by Robert Sapolsky</a>
	</h2>
	<div class="entry-content">
		<p><em>Human Behavioral Biology</em> by</p>

<p><a href="http://en.wikipedia.org/wiki/Robert_Sapolsky">Robert Spalosky</a></p>

<div class="embed-video-container"><iframe width="400" height="300" src="http://www.youtube.com/embed/NNnIGh9g6fA "></iframe></div>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-10T19:52:00+10:00" pubdate data-updated="true">Sep 10<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/post/categories/online-education/'>online_education</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/post/2012/09/09/p-31190527440/">
		
			Pathogen: Manage Vim Runtimepath</a>
	</h2>
	<div class="entry-content">
		<p><a href="https://github.com/tpope/vim-pathogen]">Pathogen: manage vim runtimepath</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-09-09T20:43:00+10:00" pubdate data-updated="true">Sep 9<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/post/categories/vim/'>vim</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/post/page/13/" class="prev">Prev</a>
    
    
        <a href="/post/page/15/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Anthony Kong

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>