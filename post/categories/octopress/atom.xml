<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: octopress | Timeline]]></title>
  <link href="http://www.ahwkong.com/post/categories/octopress/atom.xml" rel="self"/>
  <link href="http://www.ahwkong.com/"/>
  <updated>2015-02-15T19:33:35+11:00</updated>
  <id>http://www.ahwkong.com/</id>
  <author>
    <name><![CDATA[Anthony Kong]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[octopress deploy rejected]]></title>
    <link href="http://www.ahwkong.com/post/2014/03/22/octopress-deploy-rejected/"/>
    <updated>2014-03-22T22:07:00+11:00</updated>
    <id>http://www.ahwkong.com/post/2014/03/22/octopress-deploy-rejected</id>
    <content type="html"><![CDATA[<p>Got this error when running &lsquo;rake deploy&rsquo;</p>

<p>{% codeblock %}</p>

<h2>Pushing generated _deploy website</h2>

<p>Counting objects: 9767, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (5297/5297), done.
Writing objects: 100% (7245/7245), 3.98 MiB | 121.00 KiB/s, done.
Total 7245 (delta 3406), reused 2619 (delta 423)
remote: error: GH001: Large files detected.
remote: error: Trace: 2cb44393c3f81f907b200d71379dc45c
remote: error: See <a href="http://git.io/iEPt8g">http://git.io/iEPt8g</a> for more information.
remote: error: File downloads/code/erlang/out3.log is 122.48 MB; this exceeds GitHub&rsquo;s file size limit of 100 MB
To git@github.com:kongakong/kongakong.github.com
 ! [remote rejected] master &ndash;> master (pre-receive hook declined)
error: failed to push some refs to &lsquo;git@github.com:kongakong/kongakong.github.com&rsquo;</p>

<p>{% endcodeblock %}</p>

<p>It is because I have left a log file in the downloads/code folder. Although I did not check in the file, it is copied into the _deploy folder and get committed for deployment.</p>

<p>Here is a solution:</p>

<p>1) Make sure the unwanted file is removed</p>

<p>2) Add <code>*.log</code> to <strong>.gitignore</strong> to permanently ignore this file type.</p>

<p>3) Download <a href="http://rtyley.github.io/bfg-repo-cleaner/"><code>bfg</code></a> to remove the redundant, big files in the <strong>_deploy</strong> folder</p>

<p>Here is the partial output from <code>bfg</code></p>

<p>{% codeblock %}</p>

<p>These are your protected commits, and so their contents will NOT be altered:</p>

<ul>
<li>commit d8b90a41 (protected by &lsquo;HEAD&rsquo;)</li>
</ul>


<h2>Cleaning</h2>

<p>Found 910 commits
Cleaning commits:       100% (910/910)
Cleaning commits completed in 3,051 ms.</p>

<h2>Updating 1 Ref</h2>

<pre><code>Ref                 Before     After   
---------------------------------------
refs/heads/master | d8b90a41 | 1c0ad187
</code></pre>

<p>Updating references:    100% (1/1)
&hellip;Ref update completed in 16 ms.</p>

<h2>Commit Tree-Dirt History</h2>

<pre><code>Earliest                                              Latest
|                                                          |
...........................................................D

D = dirty commits (file tree fixed)
m = modified commits (commit message or parents changed)
. = clean commits (no changes to file tree)

                        Before     After   
-------------------------------------------
First modified commit | 6725709a | f2971f05
Last dirty commit     | cbc09c38 | 774bb768
</code></pre>

<p>In total, 14 object ids were changed &ndash; a record of these will be written to:</p>

<pre><code>/Users/antkong/octopress/_deploy.bfg-report/2014-03-22T21-03/object-id-map.old-new.txt
</code></pre>

<p>BFG run is complete!</p>

<p>{% endcodeblock %}</p>

<p>4) Now you can run the <code>rake deploy</code> again</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[keep vi swp file in tmp]]></title>
    <link href="http://www.ahwkong.com/post/2013/06/29/keep-vi-swp-file-in-tmp/"/>
    <updated>2013-06-29T21:02:00+10:00</updated>
    <id>http://www.ahwkong.com/post/2013/06/29/keep-vi-swp-file-in-tmp</id>
    <content type="html"><![CDATA[<p><code>vi</code> is my editor of choice when I need to do some quick editing.</p>

<p>When vi edits a file, it will usally create a <code>swp</code> file for recovery purpose. Usually it causes no problem.</p>

<p>But apparently octopress does not work when there is temporry file in the <code>post</code> directory. Rake will emit</p>

<p><code>
rake aborted!
No such file or directory - public/_posts/.2013-06-29-example.markdown.swp
</code></p>

<p>and then bailed.</p>

<p>I added
<code>
set backupdir=~/tmp
</code>
to my .vimrc. Hopefully it will prevent this problem from happening again.</p>
]]></content>
  </entry>
  
</feed>
