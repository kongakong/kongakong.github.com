<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: erlang | Timeline]]></title>
  <link href="http://www.ahwkong.com/post/categories/erlang/atom.xml" rel="self"/>
  <link href="http://www.ahwkong.com/"/>
  <updated>2014-03-15T23:22:28+11:00</updated>
  <id>http://www.ahwkong.com/</id>
  <author>
    <name><![CDATA[Anthony Kong]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[sometimes it is not obvious at the beginning]]></title>
    <link href="http://www.ahwkong.com/post/2014/03/15/sometimes-it-is-not-obvious-at-the-beginning/"/>
    <updated>2014-03-15T15:49:00+11:00</updated>
    <id>http://www.ahwkong.com/post/2014/03/15/sometimes-it-is-not-obvious-at-the-beginning</id>
    <content type="html"><![CDATA[<p>I want to create a function for use as a predicate in the function <code>lists:any</code>. I try it first in erlang shell,</p>

<pre><code>137&gt; F = fun(X) -&gt; X == 1 end.
#Fun&lt;erl_eval.6.80484245&gt;
</code></pre>

<p>It works as expected:</p>

<pre><code>138&gt; lists:any(F, [2, 3]).
false
139&gt; lists:any(F, [2, 1, 3]).
true
</code></pre>

<p>Then I want to change the condition to something else, and I got an error message:</p>

<pre><code>140&gt; F = fun(X) -&gt; X /= 1 end.
** exception error: no match of right hand side value #Fun&lt;erl_eval.6.80484245&gt;
</code></pre>

<p>My first thought: It is interesting&hellip; Did I mix up the &lsquo;not equal&rsquo; operator in erlang? Maybe it is not &lsquo;/=&rsquo;?</p>

<p>It turns out it is because the code at 140 is effectively an attempt to rebound the <code>F</code> variable. The error message is actually about this rather than the operator. I do not usually test code in the erlang shell, so it took me a while to figure it out.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SpaceX and redundancy]]></title>
    <link href="http://www.ahwkong.com/post/2014/03/06/spacex-and-redundancy/"/>
    <updated>2014-03-06T07:51:00+11:00</updated>
    <id>http://www.ahwkong.com/post/2014/03/06/spacex-and-redundancy</id>
    <content type="html"><![CDATA[<p><strong>Q:</strong> So, these flight computers on Dragon – there are three on board, and that&rsquo;s for redundancy?</p>

<p><strong>A:</strong> There are actually six computers. They operate in pairs, so there are three computer units, each of which have two computers checking on each other. The reason we have three is when operating in proximity of ISS, we have to always have two computer strings voting on something on critical actions. We have three so we can tolerate a failure and still have two voting on each other. And that has nothing to do with radiation, that has to do with ensuring that we&rsquo;re safe when we&rsquo;re flying our vehicle in the proximity of the space station.</p>

<p>I went into the lab earlier today, and we have 18 different processing units with computers in them. We have three main computers, but 18 units that have a computer of some kind, and all of them are triple computers – everything is three processors. So we have like 54 processors on the spacecraft. It&rsquo;s a highly distributed design and very fault-tolerant and very robust.</p>

<p><a href="http://www.aviationweek.com/Blogs.aspx?plckBlogId=Blog:04ce340e-4b63-4d23-9695-d49ab661f385&amp;plckPostId=Blog:04ce340e-4b63-4d23-9695-d49ab661f385Post:a8b87703-93f9-4cdf-885f-9429605e14df">Source</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[compile debug_info]]></title>
    <link href="http://www.ahwkong.com/post/2014/01/18/compile-debug-info/"/>
    <updated>2014-01-18T13:04:00+11:00</updated>
    <id>http://www.ahwkong.com/post/2014/01/18/compile-debug-info</id>
    <content type="html"><![CDATA[<p>After coming this SO question about [debug_info] (<a href="http://stackoverflow.com/questions/6830271/requesting-debug-info-in-an-erlang-module-using-compile">http://stackoverflow.com/questions/6830271/requesting-debug-info-in-an-erlang-module-using-compile</a> ), I am curious if it is indeed a problem.</p>

<p>Based on the <a href="http://www.erlang.org/doc/man/compile.html#debug_info">documentation</a>, this should enable the addition of debug info to the .beam files.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">testdebuginfo</span><span class="p">).</span>
</span><span class='line'><span class="p">-</span><span class="ni">compile</span><span class="p">(</span><span class="n">debug_info</span><span class="p">).</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>However neither using <code>c</code> in erlang shell or using <code>erlc</code> directly will put the debug info into beam file.</p>

<p>I can only implant debug info through erlang shell like this:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>4> debugger:start().&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>=ERROR REPORT==== 23-Jan-2014::12:23:39 ===
</span><span class='line'>ERROR: Could not find &lsquo;wxe_driver.so&rsquo; in: /usr/local/Cellar/erlang/R16B03/lib/erlang/lib/wx-1.1.1/priv
</span><span class='line'>{ok,&lt;0.49.0>}
</span><span class='line'>5> c(testdebuginfo, [debug_info]).
</span><span class='line'>{ok,testdebuginfo}&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Discount Margin of FRN]]></title>
    <link href="http://www.ahwkong.com/post/2013/12/09/discount-margin-of-frn/"/>
    <updated>2013-12-09T23:45:00+11:00</updated>
    <id>http://www.ahwkong.com/post/2013/12/09/discount-margin-of-frn</id>
    <content type="html"><![CDATA[<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>&lsquo;Discount Margin&rsquo;   (frn.erl)</span> <a href='/downloads/code/erlang/frn.erl'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='erlang'><span class='line'><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">frn</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'><span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">discount_margin</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="n">discount_margin</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span> <span class="n">test</span><span class="o">/</span><span class="mi">0</span><span class="p">]).</span>
</span><span class='line'>
</span><span class='line'><span class="c">% Simple margin = ((M − Pd ) / (100 × T) )+ Mq</span>
</span><span class='line'><span class="c">% </span>
</span><span class='line'><span class="c">% where</span>
</span><span class='line'><span class="c">% Pd = the dirty price, or P plus the accrued interest AI </span>
</span><span class='line'><span class="c">% M = the par value</span>
</span><span class='line'><span class="c">% T = the number of years from settlement to maturity </span>
</span><span class='line'><span class="c">% Mq = the quoted margin</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">% A positive simple margin signifies that the FRN’s yield is higher than that of a comparable money market security.</span>
</span><span class='line'><span class="nf">discount_margin</span><span class="p">(</span><span class="nv">ParValue</span><span class="p">,</span> <span class="nv">DirtyPrice</span><span class="p">,</span> <span class="nv">Years</span><span class="p">,</span> <span class="nv">QuotedMargin</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">ParValue</span> <span class="o">-</span> <span class="nv">DirtyPrice</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="o">*</span> <span class="nv">Years</span><span class="p">)</span> <span class="o">+</span> <span class="nv">QuotedMargin</span><span class="p">.</span>
</span><span class='line'><span class="nf">discount_margin</span><span class="p">(</span><span class="nv">ParValue</span><span class="p">,</span> <span class="nv">Price</span><span class="p">,</span> <span class="nv">AccruedInterest</span><span class="p">,</span> <span class="nv">Years</span><span class="p">,</span> <span class="nv">QuotedMargin</span><span class="p">)</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="n">discount_margin</span><span class="p">(</span><span class="nv">ParValue</span><span class="p">,</span> <span class="nv">Price</span> <span class="o">+</span> <span class="nv">AccruedInterest</span><span class="p">,</span> <span class="nv">Years</span><span class="p">,</span> <span class="nv">QuotedMargin</span><span class="p">).</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nf">test</span><span class="p">()</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="n">discount_margin</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">05</span><span class="p">).</span> <span class="c">% 0.0502</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[power consumption of erlang compilation]]></title>
    <link href="http://www.ahwkong.com/post/2013/12/04/power-consumption-of-erlang-compilation/"/>
    <updated>2013-12-04T07:58:00+11:00</updated>
    <id>http://www.ahwkong.com/post/2013/12/04/power-consumption-of-erlang-compilation</id>
    <content type="html"><![CDATA[<p>Only cost 2% of battery power of my MacBookPro. Not bad at all</p>
]]></content>
  </entry>
  
</feed>
