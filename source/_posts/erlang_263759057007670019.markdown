---
layout: post
title: Erlang Mailing List - String as List 1
date:  2008-02-19T03:30:00.006+11:00
comments: true
categories: erlang
meta: 
---
A discussion named "String as List" has been running, at the time of writing, for 6 days and 56 posts already. A lot of interesting idea and insight into Erlang were poured into this discussion. I simply want to write down some interesting technical points in this blog as a digest, as a reference. *<br /><br />It all started with a question from <span class="HcCDpe"><span email="tsuraan@gmail.com" class="EP8xU" style="color: rgb(0, 104, 28);">tsuraan</span>:<br /><br /></span><blockquote style="font-style: italic;">"Why does erlang internally represent strings as lists?"</blockquote><br />First response from <span class="HcCDpe"><span email="masklinn@masklinn.net" class="EP8xU" style="color: rgb(121, 6, 25);">Masklinn</span><span class="lDACoc">, and actually many other contributors share the same idea:<br /></span></span><blockquote style="font-style: italic;"><span class="HcCDpe"><span class="lDACoc"><br /></span></span>"A lot of functional languages represent strings as lists rather than<br />arrays because lists are their basic collection datatype, and this allows the use of all the list-related functions on strings."</blockquote><br /><span class="HcCDpe"><span email="chsu79@gmail.com" class="EP8xU" style="color: rgb(91, 16, 148);">Christian S </span> put it in a shorter phrase: "historical reason". As he pointed out, "internal" is not right word in the question because string was not a special type or abstraction built on top of list. A string is a list.<br /><br />He then suggested the following module for handling large text:<br /></span><br /><blockquote><span style="font-style: italic;">"- binaries (features representation that is 1:1 with the character</span><br /><span style="font-style: italic;">encoding itself, now also (R12B) with efficient scanning and</span><br /><span style="font-style: italic;">tail-construction)</span><br /><span style="font-style: italic;">- iolists (features cheap concatenation of large texts)</span><br /><span style="font-style: italic;">- list of words and a word-dictionary (features quicker scanning of words, efficient storage too)"</span><span class="HcCDpe"><br /></span></blockquote><span class="HcCDpe"><span class="lDACoc">Then </span></span><span class="HcCDpe"><span email="kevin@scaldeferri.com" class="EP8xU" style="color: rgb(204, 0, 96);">Kevin Scaldeferri </span></span><span class="HcCDpe"><span class="lDACoc">throws in a different point: list is not a good representation because<br /><br /></span></span><blockquote><span style="font-style: italic;" class="HcCDpe"><span class="lDACoc">"</span></span><span style="font-style: italic;">First off, I append to strings a lot more than I prepend to them.  Yeah, I</span><br /><span style="font-style: italic;"> could work with reversed strings, but that's a hack to deal with using the </span><br /><span style="font-style: italic;">wrong data type.  Plus, I probably prefix match more often than suffix matching</span><br /><span style="font-style: italic;">(although this is less lopsided than append vs. prepend) ..."</span><br /></blockquote><br />Now we have a diversion, <span class="HcCDpe"><span email="vlm@lionet.info" class="EP8xU" style="color: rgb(0, 131, 145);">Lev Walkin </span></span>responded to earlier Robert's post about that list is an ideal string representation because it can easily accommodate UTF-16 and UTF-32.<br /><br /><blockquote><span style="font-style: italic;">"Small correction: UTF-16 and UTF-32 are practically dead, you certainly</span><br /><span style="font-style: italic;">need to think in terms of UTF-8 nowadays."</span><br /><br /><br /></blockquote><span class="HcCDpe">Now we are going to have several threads going on under the same thread subject. Let's get to it in my next blog. But for now I will ignore UTF-8 vs UTF16/32 discussions in order to focus on Erlang features.<br /><br />End of Part 1<br /><span class="lDACoc"></span></span><br /><span style="font-size:85%;">* It is about summarization, so quote will be edited liberally for clarity, rather than reproduced word for word.<br /></span>